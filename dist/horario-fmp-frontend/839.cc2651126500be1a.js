"use strict";(self.webpackChunkhorario_fmp_frontend=self.webpackChunkhorario_fmp_frontend||[]).push([[839],{8839:(J,_,c)=>{c.r(_),c.d(_,{SeguridadModule:()=>k});var d=c(6895),u=c(9453),m=c(3599),e=c(1571);let Z=(()=>{class o{constructor(t){this.modalService=t}openModal(t){this.modalService.open(t,{size:"lg",centered:!0})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-home"]],decls:0,vars:0,template:function(t,r){}}),o})();var s=c(433),h=c(2340),b=c(529);let C=(()=>{class o{constructor(t){this.rolService=t,this.url=h.N.urlAPI+"rol/",this.isLoading=!1,this.listRol={content:[],pageable:{offset:0,paged:!0,pageNumber:0,pageSize:0,sort:{empty:!0,sorted:!0,unsorted:!0},unpaged:!0},empty:!0,first:!0,last:!0,number:0,numberOfElements:0,size:0,sort:{empty:!0,sorted:!0,unsorted:!0},totalElements:0,totalPages:0}}getPages(t=0,r=10){return this.isLoading=!0,this.rolService.get(this.url+"listall",{params:{page:t.toString(),size:r.toString()}}).subscribe(i=>{this.listRol=i,this.isLoading=!1})}getPermisos(){return this.rolService.get(this.url+"listPermisos")}buscarPermisos(t){return this.rolService.get(this.url+"detail/"+t)}create(t){return this.rolService.post(this.url+"create",t)}update(t,r){return this.rolService.put(`${this.url}update/${r}`,t)}eliminarRol(t){return this.rolService.delete(`${this.url}delete/${t}`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(b.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var f=c(4606);function x(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",20)(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td")(7,"div",28)(8,"a",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(),g=e.MAs(40);return e.KtG(l.openModal(g,a.id))}),e._UZ(9,"i",30),e.qZA(),e.TgZ(10,"a",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.eliminar(a.id))}),e._UZ(11,"i",31),e.qZA()()()(),e.BQk()}if(2&o){const t=n.$implicit,r=n.index;e.xp6(3),e.Oqu(r+1),e.xp6(2),e.Oqu(t.rolNombre)}}function S(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td",32),e._uU(2),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.hij(" ",t.isLoading?"Cargando...":"No se encontraron resultados"," ")}}function U(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",53)(1,"div",47)(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"div",47)(5,"span")(6,"div",54)(7,"input",55),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.crear=i)}),e.qZA()()()(),e.TgZ(8,"div",47)(9,"span")(10,"div",54)(11,"input",55),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.editar=i)}),e.qZA()()()(),e.TgZ(12,"div",47)(13,"span")(14,"div",54)(15,"input",55),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.eliminar=i)}),e.qZA()()()()()}if(2&o){const t=n.$implicit;e.xp6(3),e.Oqu(t.nombre),e.xp6(4),e.Q6J("ngModel",t.crear),e.xp6(4),e.Q6J("ngModel",t.editar),e.xp6(4),e.Q6J("ngModel",t.eliminar)}}function A(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",33)(2,"div",34)(3,"div",35)(4,"div",36)(5,"strong"),e._uU(6),e.qZA()()()(),e.TgZ(7,"button",37),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.close(""))}),e.qZA()(),e.TgZ(8,"div",38)(9,"div",39)(10,"form",40),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.guardar())}),e._UZ(11,"input",41),e.TgZ(12,"div",42)(13,"div",43)(14,"label",44),e._uU(15,"Nombre del rol:"),e.qZA(),e._UZ(16,"input",45),e.qZA()()(),e.TgZ(17,"div",46)(18,"div",47)(19,"div",43)(20,"label",48),e._uU(21,"Permisos"),e.qZA()()(),e.TgZ(22,"div",47)(23,"div",43)(24,"label",48),e._uU(25,"Agregar"),e.qZA()()(),e.TgZ(26,"div",47)(27,"div",43)(28,"label",48),e._uU(29,"Editar"),e.qZA()()(),e.TgZ(30,"div",47)(31,"div",43)(32,"label",48),e._uU(33,"Eliminar"),e.qZA()()()(),e.TgZ(34,"div",39)(35,"div",47),e._UZ(36,"label",48),e.qZA()(),e.YNc(37,U,16,4,"div",49),e.qZA(),e._UZ(38,"div",39)(39,"br"),e.TgZ(40,"div",50)(41,"button",51),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.close())}),e._uU(42," Volver "),e.qZA(),e.TgZ(43,"button",52),e._uU(44," CREAR "),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(6),e.Oqu("Crear nuevo Rol"),e.xp6(4),e.Q6J("formGroup",t.formularioGeneral),e.xp6(27),e.Q6J("ngForOf",t.permisos)}}let y=(()=>{class o{constructor(t,r,i,a){this.rolServices=t,this.modalService=r,this.fb=i,this.sweetService=a,this.currentPage=1,this.permisos=[],this.listapermisos=[]}ngOnInit(){this.rolServices.getPages(),this.rolServices.getPermisos(),this.formularioGeneral=this.iniciarFormularioGeneral()}iniciarFormularioGeneral(){return this.fb.group({idRol:[""],nombreRol:["",[s.kI.required]],permisos:["",[s.kI.required]]})}get roles(){return this.rolServices.listRol}get isLoading(){return this.rolServices.isLoading}pageChange(t){this.rolServices.getPages(t-1)}openModal(t,r=""){this.formularioGeneral.reset(),this.rolServices.getPermisos().subscribe(i=>{this.permisos=i}),r?(this.buscarRoles(r),this.modalService.open(t,{size:"lg",centered:!0})):this.modalService.open(t,{size:"lg",centered:!0})}obtenerPermisos(){this.permisos.forEach(t=>{(t.crear||t.editar||t.eliminar)&&this.listapermisos.push(t)})}buscarRoles(t){this.rolServices.buscarPermisos(t).subscribe(r=>{this.formularioGeneral.get("idRol")?.setValue(r.id),this.formularioGeneral.get("nombreRol")?.setValue(r.rolNombre),r.permisos.forEach(i=>{this.permisos.forEach(a=>{i.permisos.idPermiso===a.idPermiso&&(a.crear=i.crear,a.editar=i.editar,a.eliminar=i.eliminar)})})})}limpiarPermisos(){this.permisos.forEach(t=>{t.crear=!1,t.editar=!1,t.eliminar=!1})}guardar(){if(this.formularioGeneral.get("permisos")?.setValue("si"),this.formularioGeneral.valid)if(this.formularioGeneral.get("idRol")?.value){this.obtenerPermisos();const t={nombre:this.formularioGeneral.get("nombreRol")?.value,permisos:this.listapermisos};this.rolServices.update(t,this.formularioGeneral.get("idRol")?.value).subscribe(()=>{this.rolServices.getPages(),this.modalService.dismissAll(),this.formularioGeneral.reset(),this.sweetService.showSweetSuccess("Rol Editado"),this.listapermisos=[]})}else{this.obtenerPermisos();const t={nombre:this.formularioGeneral.get("nombreRol")?.value,permisos:this.listapermisos};this.rolServices.create(t).subscribe(()=>{this.rolServices.getPages(),this.modalService.dismissAll(),this.formularioGeneral.reset(),this.sweetService.showSweetSuccess("Rol insertado correctamente"),this.listapermisos=[]})}}close(){this.modalService.dismissAll()}eliminar(t){this.sweetService.showSweetWarning("AVISO","\xbfEliminar este rol?").then(r=>{r&&this.rolServices.eliminarRol(t).subscribe(()=>{this.rolServices.getPages(),this.modalService.dismissAll(),this.formularioGeneral.reset(),this.sweetService.showSweetSuccess("Rol eliminado correctamente")})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C),e.Y36(u.FF),e.Y36(s.qu),e.Y36(f.d))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-rol"]],decls:41,vars:4,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/"],["aria-current","page",1,"breadcrumb-item","active"],[1,"card","bg-white","text-secondary","w-100","shadow-custom","mb-5"],[1,"card-header","bg-white","d-flex","justify-content-between","align-items-center"],[1,"d-flex","secondary-text","ps-2"],[1,"fa","fa-question-circle"],[1,"card-body"],[1,"row","px-4"],[1,"col-md-3","mb-3","mt-2"],[1,"d-flex","custom-placeholder"],["type","email",1,"form-control","square-border"],[1,"col-md-6"],[1,"col-md-3","mb-3","pt-2","mt-2"],["type","button",1,"btn","btn-danger","shadow-primary","mt-3","w-100","shadow-red",3,"click"],[1,"card","shadow"],[1,"table-responsive"],[1,"table"],[1,"text-center"],["sortable","#"],["sortable","titulo"],["sortable","acciones",1,"rounded-r"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex","justify-content-end","p-2",3,"pageSize","collectionSize","pageChange","page"],["modalContent",""],[1,"actions-container","d-flex","justify-content-center"],[2,"cursor","pointer",3,"click"],[1,"bi","bi-pencil"],[1,"bi","bi-trash"],["colspan","6",1,"text-center"],[1,"modal-header","bg-secondary-color","text-white","rounded-sup","card-header","shadow-sm","py-1"],[1,"modal-title"],[1,"d-flex","bd-highlight"],[1,"p-2","w-100","bd-highlight"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row"],["id","formularioRol","name","formularioRol",1,"px-4","py-2",3,"formGroup","ngSubmit"],["type","hidden","formControlName","idRol"],[1,"col-12","col-sm-12","pt-2"],[1,"form-group"],["for","titulo",1,"text-secondary"],["type","text","placeholder","Administrador","formControlName","nombreRol",1,"form-control","rounded-3","shadow-sm","custom-placeholder"],[1,"row","pt-3"],[1,"col-md-3"],[1,"text-secondary"],["class","row mt-3",4,"ngFor","ngForOf"],[1,"modal-footer","justify-content-between","px-0"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-secondary","shadow-sm","w-25","m-0",3,"click"],["form","formularioRol","type","submit",1,"btn","btn-danger","shadow-primary","btn-block","w-25","m-0"],[1,"row","mt-3"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Home"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Rol"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"span",7),e._uU(10,"Rol"),e.qZA(),e._UZ(11,"i",8),e.qZA(),e.TgZ(12,"div",9)(13,"span",7),e._uU(14,"Filtrar tabla por:"),e.qZA(),e.TgZ(15,"div",10)(16,"div",11)(17,"label",12),e._uU(18,"Nombre del Rol:"),e.qZA(),e._UZ(19,"input",13),e.qZA(),e._UZ(20,"div",14),e.TgZ(21,"div",15)(22,"button",16),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(40);return e.KtG(r.openModal(l))}),e._uU(23," Registrar nuevo rol + "),e.qZA()()()()(),e.TgZ(24,"div",17)(25,"div",18)(26,"table",19)(27,"thead")(28,"tr",20)(29,"th",21),e._uU(30,"#"),e.qZA(),e.TgZ(31,"th",22),e._uU(32,"Nombre"),e.qZA(),e.TgZ(33,"th",23),e._uU(34,"Acciones"),e.qZA()()(),e.TgZ(35,"tbody"),e.YNc(36,x,12,2,"ng-container",24),e.YNc(37,S,3,1,"tr",25),e.qZA()()(),e.TgZ(38,"ngb-pagination",26),e.NdJ("pageChange",function(l){return r.pageChange(l)})("page",function(){return r.currentPage}),e.qZA()(),e.YNc(39,A,45,3,"ng-template",null,27,e.W1O)}2&t&&(e.xp6(36),e.Q6J("ngForOf",r.roles.content),e.xp6(1),e.Q6J("ngIf",0===r.roles.content.length),e.xp6(1),e.Q6J("pageSize",r.roles.pageable.pageSize)("collectionSize",r.roles.totalElements))},dependencies:[d.sg,d.O5,m.yS,u.N9,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.sg,s.u,s.On],styles:['@charset "UTF-8";.shadow-custom[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040}th[_ngcontent-%COMP%]{background-color:var(--secondary-dark-gray);color:#fff}a[_ngcontent-%COMP%]{text-decoration:none;color:var(--secondary-color)}a[_ngcontent-%COMP%]:hover   .fa[_ngcontent-%COMP%]{color:var(--secondary-dark-gray)}.fa[_ngcontent-%COMP%]{color:#d6d6d6}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px;color:var(--secondary-light-gray)}.actions-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:1rem}.button-group[_ngcontent-%COMP%]{display:flex}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;margin:0;padding:0;border-radius:0}.btn.shadowed[_ngcontent-%COMP%]{box-shadow:#8383a840 0 30px 60px -12px inset,#6262624d 0 18px 36px -18px inset}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{border-top-left-radius:4px;border-bottom-left-radius:4px}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{border-top-right-radius:4px;border-bottom-right-radius:4px}.button-group[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#fff}.btn-light-mine[_ngcontent-%COMP%]{color:gray;background-color:#fff;border:none}.rounded-sup[_ngcontent-%COMP%]{border-top-left-radius:7px;border-top-right-radius:7px}.custom-placeholder[_ngcontent-%COMP%]::placeholder{color:#cacaca;font-style:italic}.bg-secondary-color[_ngcontent-%COMP%]{background-color:#dc1b25d7}']}),o})(),w=(()=>{class o{constructor(t){this.asignacionService=t,this.url=h.N.urlAPI+"v1/auth",this.isLoading=!1,this.listUsuario={content:[],pageable:{offset:0,paged:!0,pageNumber:0,pageSize:0,sort:{empty:!0,sorted:!0,unsorted:!0},unpaged:!0},empty:!0,first:!0,last:!0,number:0,numberOfElements:0,size:0,sort:{empty:!0,sorted:!0,unsorted:!0},totalElements:0,totalPages:0},this.listDocente=[],this.listRol=[],this.listDepartamento=[]}getPages(t=0,r=10){return this.isLoading=!0,this.asignacionService.get(this.url+"/listAll",{params:{page:t.toString(),size:r.toString()}}).subscribe(i=>{this.listUsuario=i,this.isLoading=!1})}getDocente(){return this.asignacionService.get(`${this.url}/listAllDocente`).subscribe(t=>{this.listDocente=t})}getRoles(){return this.asignacionService.get(`${this.url}/listAllRoles`).subscribe(t=>{this.listRol=t})}getDepartamentos(){return this.asignacionService.get(`${this.url}/listAllDepartamento`).subscribe(t=>{this.listDepartamento=t})}crearUsuario(t){return this.asignacionService.post(`${this.url}/nuevo`,t)}buscarUsuario(t){return this.asignacionService.get(`${this.url}/detail/${t}`)}actualizarUsuario(t,r){return this.asignacionService.put(`${this.url}/editar/${t}`,r)}eliminarUsuario(t){return this.asignacionService.delete(`${this.url}/eliminar/${t}`)}search(t){return this.asignacionService.get(`${this.url}/listAll?nombre=${t}`).subscribe(r=>{this.listUsuario=r})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(b.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=c(3778);function q(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",20)(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td")(15,"div",28)(16,"a",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(),g=e.MAs(49);return e.KtG(l.openModal(g,a.id))}),e._UZ(17,"i",30),e.qZA(),e.TgZ(18,"a",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.eliminarUsuario(a.id))}),e._UZ(19,"i",31),e.qZA()()()(),e.BQk()}if(2&o){const t=n.$implicit,r=n.index;e.xp6(3),e.Oqu(r+1),e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.usuario),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.docente),e.xp6(2),e.Oqu(t.telefono)}}function M(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td",32),e._uU(2),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.hij(" ",t.isLoading?"Cargando...":"No se encontraron resultados"," ")}}function P(o,n){if(1&o&&(e.TgZ(0,"ng-option",62),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function O(o,n){if(1&o&&(e.TgZ(0,"ng-option",62),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function R(o,n){if(1&o&&(e.TgZ(0,"ng-option",62),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.rolNombre)}}function F(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",33)(2,"div",34)(3,"div",35)(4,"div",36),e._uU(5),e.qZA()()(),e.TgZ(6,"button",37),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.close(""))}),e.qZA()(),e.TgZ(7,"div",38)(8,"form",39),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.guardar())}),e._UZ(9,"input",40),e.TgZ(10,"div",41)(11,"div",42)(12,"label",43),e._uU(13,"Nombre:"),e.qZA(),e._UZ(14,"input",44),e.qZA(),e.TgZ(15,"div",42)(16,"label",45),e._uU(17,"Nombre de usuario:"),e.qZA(),e._UZ(18,"input",46),e.qZA(),e.TgZ(19,"div",42)(20,"label",47),e._uU(21,"Email:"),e.qZA(),e._UZ(22,"input",48),e.qZA(),e.TgZ(23,"div",42)(24,"label",49),e._uU(25,"Contrase\xf1a:"),e.qZA(),e._UZ(26,"input",50),e.qZA(),e.TgZ(27,"div",51)(28,"div",52)(29,"div",42)(30,"label",53),e._uU(31,"Docente:"),e.qZA(),e.TgZ(32,"ng-select",54),e.YNc(33,P,2,2,"ng-option",55),e.qZA()()(),e.TgZ(34,"div",52)(35,"div",42)(36,"label",53),e._uU(37,"Departamento:"),e.qZA(),e.TgZ(38,"ng-select",56),e.YNc(39,O,2,2,"ng-option",55),e.qZA()()()(),e.TgZ(40,"div",42)(41,"label",57),e._uU(42,"Rol:"),e.qZA(),e.TgZ(43,"ng-select",58),e.YNc(44,R,2,2,"ng-option",55),e.qZA()()(),e._UZ(45,"br"),e.TgZ(46,"div",59)(47,"button",60),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeModal())}),e._uU(48," Volver "),e.qZA(),e.TgZ(49,"button",61),e._uU(50,"CREAR"),e.qZA()()()()()}if(2&o){const t=e.oxw();e.xp6(5),e.hij(" ",t.isEditar?"Editar Usuario":"Crear nuevo Usuario"," "),e.xp6(3),e.Q6J("formGroup",t.formularioGeneral),e.xp6(25),e.Q6J("ngForOf",t.docentes),e.xp6(6),e.Q6J("ngForOf",t.departamentos),e.xp6(5),e.Q6J("ngForOf",t.roles)}}const N=[{path:"",component:Z,data:{titulo:"Home"}},{path:"rol",component:y,data:{titulo:"Rol"}},{path:"usuarios",component:(()=>{class o{constructor(t,r,i,a){this.usuarioService=t,this.modalService=r,this.fb=i,this.sweetService=a,this.currentPage=1,this.isEditar=!1}ngOnInit(){this.usuarioService.getPages(),this.usuarioService.getDocente(),this.usuarioService.getRoles(),this.usuarioService.getDepartamentos(),this.formularioGeneral=this.iniciarFormularioGeneral(),this.formularioFiltro=this.iniciarFormularioFiltro()}iniciarFormularioGeneral(){return this.fb.group({id:[],nombre:["",[s.kI.required]],nombreUsuario:["",[s.kI.required]],email:["",[s.kI.required]],password:["",[s.kI.required]],docente:["",[s.kI.required]],departamento:["",[s.kI.required]],rol:["",[s.kI.required]]})}iniciarFormularioFiltro(){return this.fb.group({nombrefiltro:[""],rolFiltro:null,bodegaFiltro:null})}get usuarios(){return this.usuarioService.listUsuario}get docentes(){return this.usuarioService.listDocente}get departamentos(){return this.usuarioService.listDepartamento}get roles(){return this.usuarioService.listRol}get isLoading(){return this.usuarioService.isLoading}pageChange(t){this.usuarioService.getPages(t-1)}closeModal(){this.formularioGeneral.reset(),this.modalService.dismissAll()}filtrar(){const t=this.formularioFiltro.value.nombrefiltro;this.currentPage=1,t?this.usuarioService.search(t):this.usuarioService.getPages()}openModal(t,r){this.formularioGeneral.reset(),r?(this.usuarioService.buscarUsuario(r).subscribe(i=>{this.formularioGeneral.patchValue({id:i.id,nombre:i.nombre,nombreUsuario:i.nombreUsuario,email:i.email,docente:i.docente.id,rol:i.rol.id,departamento:i.departamento.id})}),this.isEditar=!0,this.modalService.open(t,{size:"lg",centered:!0})):this.modalService.open(t,{size:"lg",centered:!0})}guardar(){this.formularioGeneral.valid&&(this.formularioGeneral.value.id?this.usuarioService.actualizarUsuario(this.formularioGeneral.value.id,this.formularioGeneral.value).subscribe(()=>{this.usuarioService.getPages(),this.modalService.dismissAll(),this.formularioGeneral.reset(),this.formularioFiltro.reset(),this.sweetService.showSweetSuccess("Usuario editado correctamente")}):this.usuarioService.crearUsuario(this.formularioGeneral.value).subscribe(()=>{this.usuarioService.getPages(),this.modalService.dismissAll(),this.formularioGeneral.reset(),this.formularioFiltro.reset(),this.sweetService.showSweetSuccess("Usuario insertado correctamente")}))}eliminarUsuario(t){this.sweetService.showSweetWarning("AVISO","\xbfEliminar este usuario?").then(r=>{r&&this.usuarioService.eliminarUsuario(t).subscribe(()=>{this.usuarioService.getPages(),this.modalService.dismissAll(),this.formularioGeneral.reset(),this.formularioFiltro.reset(),this.sweetService.showSweetSuccess("Usuario eliminado correctamente")})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w),e.Y36(u.FF),e.Y36(s.qu),e.Y36(f.d))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-usuario"]],decls:50,vars:5,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/"],["aria-current","page",1,"breadcrumb-item","active"],[1,"card","bg-white","text-secondary","w-100","shadow-custom","mb-5"],[1,"card-header","bg-white","d-flex","justify-content-between","align-items-center"],[1,"d-flex","secondary-text","ps-2"],[1,"fa","fa-question-circle"],[1,"card-body"],[1,"row","px-4"],[1,"col-md-3","mb-3","mt-2",3,"formGroup"],[1,"d-flex","custom-placeholder"],["type","text","formControlName","nombrefiltro",1,"form-control","square-border",3,"input"],[1,"col-md-6"],[1,"col-md-3","mb-3","pt-2","mt-2"],["type","button",1,"btn","btn-danger","shadow-primary","mt-3","w-100","shadow-red",3,"click"],[1,"card","shadow"],[1,"table-responsive"],[1,"table"],[1,"text-center"],["sortable","#"],["sortable","titulo"],["sortable","acciones",1,"rounded-r"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex","justify-content-end","p-2",3,"pageSize","collectionSize","pageChange","page"],["modalContent",""],[1,"actions-container","d-flex","justify-content-center"],[2,"cursor","pointer",3,"click"],[1,"bi","bi-pencil"],[1,"bi","bi-trash"],["colspan","7",1,"text-center"],[1,"modal-header","bg-secondary-color","text-white","rounded-sup","card-header","shadow-sm","py-1"],[1,"modal-title"],[1,"d-flex","bd-highlight"],[1,"p-2","w-100","bd-highlight"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"px-4","py-2",3,"formGroup","ngSubmit"],["type","hidden","name","","formControlName","id"],[1,"col-12","col-sm-12","pt-2"],[1,"form-group"],["for","nombre",1,"text-secondary"],["type","text","placeholder","William Del Cid","formControlName","nombre",1,"form-control","rounded-3","shadow-sm","custom-placeholder"],["for","nombreUsuario",1,"text-secondary"],["type","text","formControlName","nombreUsuario",1,"form-control","rounded-3","shadow-sm","custom-placeholder"],["for","email",1,"text-secondary"],["type","email","formControlName","email",1,"form-control","rounded-3","shadow-sm","custom-placeholder"],["for","password",1,"text-secondary"],["type","password","formControlName","password",1,"form-control","rounded-3","shadow-sm","custom-placeholder"],[1,"row"],[1,"col-lg-6"],["for","docente",1,"text-secondary"],["formControlName","docente","placeholder","Selecciona un docente"],[3,"value",4,"ngFor","ngForOf"],["formControlName","departamento","placeholder","Selecciona un departamento"],["for","rol",1,"text-secondary"],["formControlName","rol","placeholder","Selecciona un rol"],[1,"modal-footer","justify-content-between","px-0"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-secondary","shadow-sm","w-25","m-0",3,"click"],["type","submit",1,"btn","btn-danger","shadow-primary","btn-block","w-25","m-0"],[3,"value"]],template:function(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Home"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Usuario"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"span",7),e._uU(10,"Usuario"),e.qZA(),e._UZ(11,"i",8),e.qZA(),e.TgZ(12,"div",9)(13,"span",7),e._uU(14,"Filtrar tabla por:"),e.qZA(),e.TgZ(15,"div",10)(16,"form",11)(17,"div")(18,"label",12),e._uU(19,"Nombre del Usuario:"),e.qZA(),e.TgZ(20,"input",13),e.NdJ("input",function(){return r.filtrar()}),e.qZA()()(),e._UZ(21,"div",14),e.TgZ(22,"div",15)(23,"button",16),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(49);return e.KtG(r.openModal(l))}),e._uU(24," Registrar nuevo usuario + "),e.qZA()()()()(),e.TgZ(25,"div",17)(26,"div",18)(27,"table",19)(28,"thead")(29,"tr",20)(30,"th",21),e._uU(31,"#"),e.qZA(),e.TgZ(32,"th",22),e._uU(33,"Nombre"),e.qZA(),e.TgZ(34,"th",22),e._uU(35,"Usuario"),e.qZA(),e.TgZ(36,"th",22),e._uU(37,"Email"),e.qZA(),e.TgZ(38,"th",22),e._uU(39,"Docente"),e.qZA(),e.TgZ(40,"th",22),e._uU(41,"Telefono"),e.qZA(),e.TgZ(42,"th",23),e._uU(43,"Acciones"),e.qZA()()(),e.TgZ(44,"tbody"),e.YNc(45,q,20,6,"ng-container",24),e.YNc(46,M,3,1,"tr",25),e.qZA()()(),e.TgZ(47,"ngb-pagination",26),e.NdJ("pageChange",function(l){return r.pageChange(l)})("page",function(){return r.currentPage}),e.qZA()(),e.YNc(48,F,51,5,"ng-template",null,27,e.W1O)}2&t&&(e.xp6(16),e.Q6J("formGroup",r.formularioFiltro),e.xp6(29),e.Q6J("ngForOf",r.usuarios.content),e.xp6(1),e.Q6J("ngIf",0===r.usuarios.content.length),e.xp6(1),e.Q6J("pageSize",r.usuarios.pageable.pageSize)("collectionSize",r.usuarios.totalElements))},dependencies:[d.sg,d.O5,m.yS,u.N9,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,p.w9,p.jq],styles:['@charset "UTF-8";.shadow-custom[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040}th[_ngcontent-%COMP%]{background-color:var(--secondary-dark-gray);color:#fff}a[_ngcontent-%COMP%]{text-decoration:none;color:var(--secondary-color)}a[_ngcontent-%COMP%]:hover   .fa[_ngcontent-%COMP%]{color:var(--secondary-dark-gray)}.fa[_ngcontent-%COMP%]{color:#d6d6d6}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px;color:var(--secondary-light-gray)}.actions-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:1rem}.button-group[_ngcontent-%COMP%]{display:flex}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;margin:0;padding:0;border-radius:0}.btn.shadowed[_ngcontent-%COMP%]{box-shadow:#8383a840 0 30px 60px -12px inset,#6262624d 0 18px 36px -18px inset}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{border-top-left-radius:4px;border-bottom-left-radius:4px}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{border-top-right-radius:4px;border-bottom-right-radius:4px}.button-group[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#fff}.btn-light-mine[_ngcontent-%COMP%]{color:gray;background-color:#fff;border:none}.rounded-sup[_ngcontent-%COMP%]{border-top-left-radius:7px;border-top-right-radius:7px}.custom-placeholder[_ngcontent-%COMP%]::placeholder{color:#cacaca;font-style:italic}.bg-secondary-color[_ngcontent-%COMP%]{background-color:#dc1b25d7}']}),o})(),data:{titulo:"Usuarios"}},{path:"bitacora",component:(()=>{class o{constructor(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-bitacora"]],decls:2,vars:0,template:function(t,r){1&t&&(e.TgZ(0,"p"),e._uU(1,"bitacora works!"),e.qZA())}}),o})(),data:{titulo:"Bitacora"}}];let G=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild(N),m.Bz]}),o})(),k=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,G,u.jF,s.UX,s.u5,p.A0]}),o})()}}]);